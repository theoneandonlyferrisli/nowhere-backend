<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">nowhere - Explore. Discover. Share.</title>
    
    <!-- Preconnect to Firebase Storage -->
    <link rel="preconnect" href="https://firebasestorage.googleapis.com">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            overflow-x: hidden;
            background: #000;
        }
        
        /* Full-screen carousel container */
        .carousel-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            z-index: 1;
        }
        
        /* Carousel slides */
        .carousel-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        
        .carousel-slide.active {
            opacity: 1;
            z-index: 2;
        }
        
        /* Glassmorphism overlay with iOS 18 liquid glass effect */
        .glass-overlay {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            padding: 32px 48px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border-radius: 32px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 
                0 8px 32px 0 rgba(0, 0, 0, 0.37),
                inset 0 1px 0 0 rgba(255, 255, 255, 0.5),
                0 1px 40px 0 rgba(255, 255, 255, 0.1);
            max-width: 90%;
            text-align: center;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateX(-50%) translateY(0px);
            }
            50% {
                transform: translateX(-50%) translateY(-10px);
            }
        }
        
        .glass-overlay h1 {
            font-size: clamp(2rem, 5vw, 4rem);
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 12px;
            text-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
            letter-spacing: -0.02em;
        }
        
        .glass-overlay p {
            font-size: clamp(1rem, 2vw, 1.5rem);
            font-weight: 400;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        /* Loading spinner */
        .loading-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            z-index: 100;
            transition: opacity 0.5s ease-out;
        }
        
        .loading-container.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Navigation dots */
        .carousel-dots {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9;
            display: flex;
            gap: 10px;
        }
        
        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .dot.active {
            background: rgba(255, 255, 255, 0.9);
            width: 24px;
            border-radius: 4px;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .glass-overlay {
                bottom: 20px;
                padding: 24px 32px;
                border-radius: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-container" id="loading">
        <div class="spinner"></div>
    </div>
    
    <!-- Carousel Container -->
    <div class="carousel-container" id="carousel">
        <!-- Slides will be dynamically inserted here -->
    </div>
    
    <!-- Navigation Dots -->
    <div class="carousel-dots" id="dots">
        <!-- Dots will be dynamically inserted here -->
    </div>
    
    <!-- Glass Overlay with App Info -->
    <div class="glass-overlay">
        <h1 id="app-name">nowhere</h1>
        <p id="app-tagline">Explore. Discover. Share.</p>
    </div>
    
    <!-- Configuration -->
    <script src="/static/config.js"></script>
    
    <script>
        // Carousel control object
        let carouselControl = null;
        
        // Wait for config.js to load before accessing CONFIG
        function init() {
            // Safety check - ensure config.js has loaded
            if (typeof CONFIG === 'undefined' || typeof initCarousel === 'undefined') {
                console.error('config.js not loaded, retrying...');
                setTimeout(init, 100);
                return;
            }
            
            // Set page title and app info from config
            document.getElementById('page-title').textContent = `${CONFIG.APP_NAME} - ${CONFIG.APP_TAGLINE}`;
            document.getElementById('app-name').textContent = CONFIG.APP_NAME;
            document.getElementById('app-tagline').textContent = CONFIG.APP_TAGLINE;
            
            // Initialize carousel
            initializeCarousel();
        }
        
        // Initialize carousel using shared function from config.js
        async function initializeCarousel() {
            carouselControl = await initCarousel('carousel', {
                showDots: true,
                dotsContainerId: 'dots',
                loadingContainerId: 'loading'
            });
        }
        
        // Pause autoplay when page is hidden
        document.addEventListener('visibilitychange', () => {
            if (carouselControl) {
                if (document.hidden) {
                    carouselControl.stopAutoplay();
                } else {
                    carouselControl.startAutoplay();
                }
            }
        });
        
        // Initialize on load
        window.addEventListener('load', init);
    </script>
</body>
</html>
